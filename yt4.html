<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Plyr æ’­æ”¾åˆ—è¡¨è‡ªåŠ¨è¿æ’­</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.6.12/dist/plyr.css" />
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 2rem auto; padding: 1rem; }
    ul { padding: 0; list-style: none; }
    li { padding: 0.5em; cursor: pointer; color: #1e88e5; }
    li.active { background: #e3f2fd; font-weight: bold; }
    li:hover { background: #f1f1f1; }
  </style>
</head>
<body>

  <h2>ğŸ“º Plyr æ’­æ”¾å™¨ + åŠ¨æ€æ­Œå• + è‡ªåŠ¨è¿æ’­</h2>

  <!-- æ’­æ”¾å™¨å®¹å™¨ -->
  <div id="player" data-plyr-provider="youtube" data-plyr-embed-id=""></div>

  <!-- æ’­æ”¾åˆ—è¡¨ -->
  <h3>ğŸµ æ­Œå•</h3>
  <ul id="playlist"></ul>

  <script src="https://cdn.jsdelivr.net/npm/plyr@3.6.12/dist/plyr.polyfilled.js"></script>
  <script>
    const playlistData = [
      { id: "bTqVqk7FSmY", title: "Red Bull ç©ºä¸­ç‰¹æŠ€" },
      { id: "dQw4w9WgXcQ", title: "Never Gonna Give You Up" },
      { id: "M7lc1UVf-VE", title: "YouTube API ç¤ºä¾‹è§†é¢‘" }
    ];

    const playlistEl = document.getElementById('playlist');
    const player = new Plyr('#player');

    let currentIndex = 0;

    // æ¸²æŸ“æ’­æ”¾åˆ—è¡¨
    function renderPlaylist() {
      playlistEl.innerHTML = '';
      playlistData.forEach((video, index) => {
        const li = document.createElement('li');
        li.textContent = `ğŸ¬ ${video.title}`;
        li.setAttribute('data-index', index);
        if (index === currentIndex) li.classList.add('active');
        playlistEl.appendChild(li);
      });
    }

    // åŠ è½½æŒ‡å®šè§†é¢‘
    function loadVideo(index) {
      const video = playlistData[index];
      if (!video) return;

      currentIndex = index;
      player.source = {
        type: 'video',
        sources: [{
          src: video.id,
          provider: 'youtube'
        }]
      };

      // æ›´æ–°é«˜äº®
      document.querySelectorAll('#playlist li').forEach(li => li.classList.remove('active'));
      const currentLi = document.querySelector(`#playlist li[data-index="${index}"]`);
      if (currentLi) currentLi.classList.add('active');
    }

    // ç»‘å®šç‚¹å‡»äº‹ä»¶
    playlistEl.addEventListener('click', e => {
      if (e.target.tagName === 'LI') {
        const index = parseInt(e.target.getAttribute('data-index'), 10);
        loadVideo(index);
      }
    });

    // è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€ä¸ª
    player.on('ended', () => {
      const nextIndex = currentIndex + 1;
      if (nextIndex < playlistData.length) {
        loadVideo(nextIndex);
      } else {
        alert("ğŸ‰ æ­Œå•æ’­æ”¾å®Œæ¯•ï¼");
      }
    });

    // åˆå§‹åŒ–
    renderPlaylist();
    loadVideo(currentIndex);
  </script>

</body>
</html>
